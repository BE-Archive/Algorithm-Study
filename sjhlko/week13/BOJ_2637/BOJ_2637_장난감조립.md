# ì¥ë‚œê° ì¡°ë¦½

ì£¼ì°¨: 4ì›” 3ì£¼ì°¨
ë‚œì´ë„: ê³¨ë“œ2
ë§í¬: https://www.acmicpc.net/problem/2637
ì†Œìš”ì‹œê°„: 90ë¶„
ì•Œê³ ë¦¬ì¦˜: DP, ê·¸ë˜í”„

# ë¬¸ì œ â“

![image](https://github.com/BE-Archive/Algorithm-Study/assets/76868151/5ddc2b78-b225-49e7-a1a4-8323a63af397)
# ì…ì¶œë ¥ âŒ¨ï¸

![image](https://github.com/BE-Archive/Algorithm-Study/assets/76868151/63402520-c737-43ad-8274-429e966b91c4)
# í’€ì´ ğŸ“š

## ì‚¬ê³  ê³¼ì • ğŸ¤”

ê°„ë‹¨í•˜ê²Œ Në¶€í„° ì‹œì‘í•´ì„œ í•˜ë‚˜ì”© íƒ€ê³ ë“¤ì–´ê°€ë©° í•„ìš”í•œ ë¶€í’ˆì„ ê³„ì‚°í–ˆë‹¤

ì´ë•Œ ê°„ì„  ê°œìˆ˜ëŠ” ìµœëŒ€ 100ê°œì´ê³  ë…¸ë“œì˜ ê°œìˆ˜ê°€ ìµœëŒ€ 100ê°œ ì´ë¯€ë¡œ, ì‹œê°„ì´ˆê³¼ê°€ ë‚˜ì§€ ì•Šì„ê²ƒì´ë¼ê³  ìƒê°í–ˆë‹¤ í•˜ì§€ë§Œ **ë‚˜ì´ë¸Œí•˜ê²Œ DFSë¡œ í’€ì´ì‹œ ì‹œê°„ì´ˆê³¼ê°€** ë‚œë‹¤ ë„ëŒ€ì²´ ì™œì¸ì§€ëŠ” ì•„ì§ ì´í•´í•˜ì§€ ëª»í–ˆë‹¤.

---

![Untitled](%E1%84%8C%E1%85%A1%E1%86%BC%E1%84%82%E1%85%A1%E1%86%AB%E1%84%80%E1%85%A1%E1%86%B7%20%E1%84%8C%E1%85%A9%E1%84%85%E1%85%B5%E1%86%B8%205276f4a8c077491794c063302df18815/Untitled%202.png)

ê°“ ì„œì˜ì”¨ê»˜ì„œ ì˜ë¬¸ì„ í•´ê²°í•´ì£¼ì—ˆë‹¤.

[BOJ 2637 ì¥ë‚œê° ì¡°ë¦½](https://velog.io/@jsin2475/BOJ-2637-ì¥ë‚œê°-ì¡°ë¦½)

í•´ë‹¹ ë¸”ë¡œê·¸ì˜ ì˜ˆì‹œì— ì˜í•˜ë©´ ìœ„ì™€ ê°™ì€ í˜•íƒœì˜ ê·¸ë˜í”„ë¡œ ê·¸ë ¤ì§€ê²Œ ë˜ì—ˆì„ë–„ ì•½ 60ì–µ ì •ë„ì˜ ì—°ì‚°ì´ ë‚˜ì˜¤ê²Œ ëœë‹¤. 

ë•Œë¬¸ì— **íŠ¹ì • ë¶€í’ˆì„ ë§Œë“œëŠ”ë° í•„ìš”í•œ ëª¨ë“  ë¶€í’ˆë“¤ì˜ ê°œìˆ˜ë¥¼ ì €ì¥í•´ë‘ëŠ” dp ë°°ì—´ì„ ì„ **ì–¸í•œë’¤, **í•œë²ˆì´ë¼ë„ í•´ë‹¹ ë¶€í’ˆì„ ë§Œë“ ì ì´ ìˆë‹¤ë©´** ë”°ë¡œ ê³„ì‚°ì„ í•˜ì§€ ì•Šê³  ì €ì¥í•´ë‘” **dp ë°°ì—´ì„ í™œìš©**í•´ì„œ ê³„ì‚°í•˜ëŠ”ê²ƒìœ¼ë¡œ ë³€ê²½í•˜ì˜€ë‹¤.

## êµ¬í˜„ âœï¸

```java
static int[] solution(int index) {
    if (dp[index][N + 1] != -1) {
        return dp[index];
    }
    dp[index][N + 1] = 1;
    if (infos.get(index).size() == 0) {
        isBasic[index] = true;
        dp[index][index] = 1;
    }
    for (int i = 0; i < infos.get(index).size(); i++) {
        Info next = infos.get(index).get(i);
        int[] nextDp = solution(next.index);
        for (int j = 1; j < N + 1; j++) {
            dp[index][j] += nextDp[j] * next.count;
        }
    }
    return dp[index];
}
```

íŠ¹ì • ë¶€í’ˆì„ ë§Œë“œëŠ”ë° í•„ìš”í•œ ë¶€í’ˆë“¤ì˜ ê°œìˆ˜ë¥¼ ì €ì¥í•œ ì¼ì°¨ì› ë°°ì—´ì„ ë¦¬í„´í•˜ëŠ” ë©”ì„œë“œì´ë‹¤.

- íƒìƒ‰ì„ í•œë²ˆì´ë¼ë„ í–ˆë‹¤ë©´ dp[í•´ë‹¹ ë¶€í’ˆì¸ë±ìŠ¤][N+1]ì— 1ì„ ì €ì¥í•˜ê³ , ì•„ë‹ˆë¼ë©´ -1ì„ ì €ì¥í•œë‹¤.
- ê¸°ë³¸ ë¶€í’ˆì´ë¼ë©´ ê¸°ë³¸ ë¶€í’ˆì´ë¼ê³  í‘œì‹œí•´ì£¼ê³  (isBasic) í•´ë‹¹ ê¸°ë³¸ ë¶€í’ˆì„ ë§Œë“œëŠ”ë° í•„ìš”í•œ ë¶€í’ˆì€ ê¸°ë³¸ ë¶€í’ˆ í•˜ë‚˜ë¿ì´ë¯€ë¡œ dp[index][index] = 1 ì„ ì €ì¥í•œë‹¤.
- ì¤‘ê°„ ë¶€í’ˆì¸ê²½ìš° ë§Œë“œëŠ”ë°ì— í•„ìš”í•œ ë‹¤ë¥¸ ë¶€í’ˆì„ ë§Œë“œëŠ”ë°ì— í•„ìš”í•œ ë¶€í’ˆë“¤ì„ ì°¾ì•„(ì¬ê·€) ì €ì¥í•œë‹¤.

# ì „ì²´ ì½”ë“œ ğŸ–¥ï¸

## ë‚´ ì½”ë“œ ğŸ˜

```java
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;
import java.util.StringTokenizer;

public class Toy {
    //https://www.acmicpc.net/problem/2637
    //ì¥ë‚œê° ì¡°ë¦½
    static int N, M;
    static int[] ans;
    static int[][] dp;
    static boolean[] isBasic;
    static List<List<Info>> infos = new ArrayList<>();

    static class Info {
        int index;
        int count;

        public Info(int index, int count) {
            this.index = index;
            this.count = count;
        }
    }

    static int[] solution(int index) {
        if (dp[index][N + 1] != -1) {
            return dp[index];
        }
        dp[index][N + 1] = 1;
        if (infos.get(index).size() == 0) {
            isBasic[index] = true;
            dp[index][index] = 1;
        }
        for (int i = 0; i < infos.get(index).size(); i++) {
            Info next = infos.get(index).get(i);
            int[] nextDp = solution(next.index);
            for (int j = 1; j < N + 1; j++) {
                dp[index][j] += nextDp[j] * next.count;
            }
        }
        return dp[index];
    }

    public static void main(String[] args) throws IOException {
        BufferedReader bf = new BufferedReader(new InputStreamReader(System.in));
        N = Integer.parseInt(bf.readLine());
        M = Integer.parseInt(bf.readLine());
        for (int i = 0; i < N + 1; i++) {
            infos.add(new ArrayList<>());
        }
        ans = new int[N + 1];
        isBasic = new boolean[N + 1];
        dp = new int[N + 1][N + 2];
        for (int i = 0; i < N + 1; i++) {
            dp[i][N + 1] = -1;
        }
        for (int i = 0; i < M; i++) {
            StringTokenizer st = new StringTokenizer(bf.readLine());
            int x = Integer.parseInt(st.nextToken());
            int y = Integer.parseInt(st.nextToken());
            int k = Integer.parseInt(st.nextToken());
            infos.get(x).add(new Info(y, k));
        }
        solution(N);

        StringBuilder print = new StringBuilder();
        for (int i = 0; i < N + 1; i++) {
            if (isBasic[i]) {
                print.append(i).append(" ").append(dp[N][i]).append("\n");
            }
        }
        System.out.println(print);

    }
}

```